{"version":3,"file":"activitymonitor.js","sourceRoot":"","sources":["../../../../coreutils/src/activitymonitor.ts"],"names":[],"mappings":";AAAA,0CAA0C;AAC1C,2DAA2D;;AAI3D,mDAAsD;AAEtD;;GAEG;AACH;IACE;;OAEG;IACH,YAAY,OAA+C;QA6DnD,WAAM,GAAG,CAAC,CAAC,CAAC;QACZ,aAAQ,GAAG,CAAC,CAAC,CAAC;QAGd,gBAAW,GAAG,KAAK,CAAC;QACpB,qBAAgB,GAAG,IAAI,kBAAM,CAGnC,IAAI,CAAC,CAAC;QApEN,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;IAC1C,CAAC;IAED;;OAEG;IACH,IAAI,eAAe;QAIjB,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED;;OAEG;IACH,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACD,IAAI,OAAO,CAAC,KAAa;QACvB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IACxB,CAAC;IAED;;;;;OAKG;IACH,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,OAAO;QACL,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO;SACR;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,kBAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC;IAED;;OAEG;IACK,cAAc,CAAC,MAAc,EAAE,IAAU;QAC/C,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;YACnC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;gBACzB,MAAM,EAAE,IAAI,CAAC,OAAO;gBACpB,IAAI,EAAE,IAAI,CAAC,KAAK;aACjB,CAAC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpB,CAAC;CAWF;AA1ED,0CA0EC","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { IDisposable } from '@phosphor/disposable';\n\nimport { ISignal, Signal } from '@phosphor/signaling';\n\n/**\n * A class that monitors activity on a signal.\n */\nexport class ActivityMonitor<Sender, Args> implements IDisposable {\n  /**\n   * Construct a new activity monitor.\n   */\n  constructor(options: ActivityMonitor.IOptions<Sender, Args>) {\n    options.signal.connect(this._onSignalFired, this);\n    this._timeout = options.timeout || 1000;\n  }\n\n  /**\n   * A signal emitted when activity has ceased.\n   */\n  get activityStopped(): ISignal<\n    this,\n    ActivityMonitor.IArguments<Sender, Args>\n  > {\n    return this._activityStopped;\n  }\n\n  /**\n   * The timeout associated with the monitor, in milliseconds.\n   */\n  get timeout(): number {\n    return this._timeout;\n  }\n  set timeout(value: number) {\n    this._timeout = value;\n  }\n\n  /**\n   * Test whether the monitor has been disposed.\n   *\n   * #### Notes\n   * This is a read-only property.\n   */\n  get isDisposed(): boolean {\n    return this._isDisposed;\n  }\n\n  /**\n   * Dispose of the resources used by the activity monitor.\n   */\n  dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    this._isDisposed = true;\n    Signal.clearData(this);\n  }\n\n  /**\n   * A signal handler for the monitored signal.\n   */\n  private _onSignalFired(sender: Sender, args: Args): void {\n    clearTimeout(this._timer);\n    this._sender = sender;\n    this._args = args;\n    this._timer = window.setTimeout(() => {\n      this._activityStopped.emit({\n        sender: this._sender,\n        args: this._args\n      });\n    }, this._timeout);\n  }\n\n  private _timer = -1;\n  private _timeout = -1;\n  private _sender: Sender;\n  private _args: Args;\n  private _isDisposed = false;\n  private _activityStopped = new Signal<\n    this,\n    ActivityMonitor.IArguments<Sender, Args>\n  >(this);\n}\n\n/**\n * The namespace for `ActivityMonitor` statics.\n */\nexport namespace ActivityMonitor {\n  /**\n   * The options used to construct a new `ActivityMonitor`.\n   */\n  export interface IOptions<Sender, Args> {\n    /**\n     * The signal to monitor.\n     */\n    signal: ISignal<Sender, Args>;\n\n    /**\n     * The activity timeout in milliseconds.\n     *\n     * The default is 1 second.\n     */\n    timeout?: number;\n  }\n\n  /**\n   * The argument object for an activity timeout.\n   *\n   */\n  export interface IArguments<Sender, Args> {\n    /**\n     * The most recent sender object.\n     */\n    sender: Sender;\n\n    /**\n     * The most recent argument object.\n     */\n    args: Args;\n  }\n}\n"]}